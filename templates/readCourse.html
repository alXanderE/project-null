<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Course Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen p-6">
  <div class="max-w-2xl mx-auto space-y-6">
    <h1 class="text-3xl font-bold mb-4 text-center">ğŸ“– Saved Course</h1>
    <div id="courseContent" class="space-y-6"></div>
  </div>

  <script>
    // Example saved JSON (replace with real fetch call later)
    const course = {
      "modules": [
        {
          "type": "quiz",
          "question": "What is the capital of France?",
          "options": ["Paris", "Berlin", "Madrid"],
          "answer": "Paris"
        },
        {
          "type": "text",
          "content": "Welcome to the course! This is an introduction."
        },
        {
          "type": "media",
          "fileName": "sample.jpg",
          "mediaType": "image"
        }
      ]
    };

    const content = document.getElementById('courseContent');

    course.modules.forEach(mod => {
      const div = document.createElement("div");
      div.className = "bg-gray-800 p-4 rounded-md shadow";

      if (mod.type === "text") {
        div.innerHTML = `
          <h2 class="text-lg font-semibold mb-2">ğŸ“ Text Module</h2>
          <p class="text-gray-200 whitespace-pre-wrap">${mod.content}</p>
        `;

      } else if (mod.type === "quiz") {
        const optionsHtml = mod.options.map(opt =>
          `<li class="pl-2">ğŸ”¹ ${opt}</li>`
        ).join("");

        div.innerHTML = `
          <h2 class="text-lg font-semibold mb-2">â“ Quiz Module</h2>
          <p class="mb-2 font-medium text-gray-300">${mod.question}</p>
          <ul class="text-gray-400 list-disc ml-5">${optionsHtml}</ul>
          <p class="text-green-400 mt-2">âœ… Answer: <strong>${mod.answer}</strong></p>
        `;

      } else if (mod.type === "media") {
        const isImage = mod.mediaType === "image";
        const src = `/uploads/${mod.fileName}`; // Make sure Flask serves this!
        div.innerHTML = `
          <h2 class="text-lg font-semibold mb-2">ğŸ“‚ Media Module</h2>
          ${isImage
            ? `<img src="${src}" alt="${mod.fileName}" class="rounded w-full max-h-96 object-contain" />`
            : `<video controls class="w-full max-h-96 rounded"><source src="${src}" type="video/mp4" /></video>`
          }
        `;
      }

      content.appendChild(div);
    });
  </script>
</body>
</html>
